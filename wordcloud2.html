<!DOCTYPE html>
<html lang="zh-CN"> 
<head>
	<meta charset="utf-8">
	<title>Wordcloud2绘制词云图 | MENBIN'S Blog</title>
	<meta name="description" content=" Wordcloud2让你的词云图更加绚烂">
	<meta name="author" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- 国产高速渲染 -->
	<meta name="renderer" content="webkit">
	<link rel="shortcut icon" href="./img/favicon.ico">	
	<link rel="canonical" href="./weather.html">
	<link rel="alternate" type="application/rss+xml" title="" href="./feed.xml">
	<!-- Le styles -->
	<link href="./css/bootstrap.min.css" rel="stylesheet">
	<link href="./css/font-awesome.min.css" rel="stylesheet">
	<link href="./css/syntax.css" rel="stylesheet">
	<link href="./css/style.css" rel="stylesheet">

</head>

<body ontouchstart="">

	<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://binmen.github.io/blog">MENBIN</a>
        </div>

        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="./index1.html">Home</a></li>
					<li><a href="./categories.html">Categories</a></li>
					<li><a href="">Tags</a></li>
					<li><a href="./About.html">About Me</a></li>
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');
	
	var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
	 *
	 * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>

	
	<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('./img/word.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Wordcloud2绘制词云图</h1>
                    <h2 class="subheading"> Wordcloud2让你的词云图更加绚烂</h2>
                    <span class="meta">Posted by MenBin on June 17, 2016</span>
					<p>&nbsp;&nbsp;&nbsp;&nbsp;<kbd>浏览量</kbd>&nbsp;&nbsp;&nbsp;&nbsp;<span data-hk-page="http://binmen.github.io/blog/wordcloud2/"> - </span>&nbsp;&nbsp;次</p>
                </div>
            </div>
        </div>
    </div>
</header>

<article>
<!-- Main Content -->
	<div class="container">
		<div class="row">
		<!-- Post Container -->
    		<div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">
    			<h2 id="section">Wordcloud2的诞生</h2>
<p>前几天无聊在刷微博时，发现R语言也可以绘制出媲美<code class="highlighter-rouge">Tagxedo</code>效果的词云图，于是按照微博上的链接找到了作者的Github，然后按照Github上的介绍进行了一下实验，感觉非常的爽。</p>
<hr>
<h2 id="section-1">作者介绍</h2>
<p>关于作者（郎大为）的详细信息，请到作者的<a href="http://chiffon.ninja">博客</a>查看，还有此项目作者已经在Github上开源，欢迎到<a href="https://github.com/lchiffon/wordcloud2">作者的Github</a>上star。作者说了，本包的完善取决于<code class="highlighter-rouge">star</code>的数量<img src="http://assets.jianshu.io/assets/emojis/smile.png" height="20" width="20"></p>
<hr>
<h2  id="section-2">wordcloud2包的安装</h2>
<ul>
<li>首先是<code class="highlighter-rouge">devtools</code>的安装，通过如下代码实现：</li>
<figure class="highlight"><pre><code class="language-r" data-lang="r">install.packages("devtools")
library(devtools)
</code></pre></figure>
<li>然后是<code class="highlighter-rouge">wordcloud2</code>的安装，通过如下代码实现：</li>
<figure class="highlight"><pre><code class="language-r" data-lang="r">devtools::install_github("lchiffon/wordcloud2")
library(wordcloud2)
</code></pre></figure>
<p>到此，利用wordcloud2绘制词云图的准备工作已经完成。</p>
</ul>
<hr>
<h2  id="section-3">wordcloud2基本使用方法</h2>
<h3  id="section-3-1">基本函数</h3>
<figure class="highlight"><pre><code class="language-r" data-lang="r">library(wordcloud2)
wordcloud2(data = dataset)
</code></pre></figure>
<hr>
<h3  id="section-3-2">函数参数设置</h3>
<ul>
<li><code class="highlighter-rouge">data</code>A data frame including word and freq in each column.</li>
<li><code class="highlighter-rouge">size</code>Font size, default is 1. The larger size means the bigger word.</li>
<li><code class="highlighter-rouge">fontFamily</code>Font to use.</li>
<li><code class="highlighter-rouge">fontWeight</code>Font weight to use, e.g. normal, bold or 600</li>
<li><code class="highlighter-rouge">color</code>color of the text, keyword 'random-dark' and 'random-light' can be used. color vector is also supported in this param.</li>
<li><code class="highlighter-rouge">minSize</code>A character string of the subtitle.</li>
<li><code class="highlighter-rouge">backgroundColor</code>Color of the background.</li>
<li><code class="highlighter-rouge">shape</code>The shape of the "cloud" to draw. Can be a keyword present. Available presents are 'circle' (default), 'cardioid' (apple or heart shape curve, the most known polar equation), 'diamond' (alias of square), 'triangle-forward', 'triangle', 'pentagon', and 'star'.</li>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;其他参数点击此处<a href="http://lchiffon.github.io/2016/06/10/wordcloud.html">here</a>，摘录自郎大为的<a href="http://chiffon.ninja">博客</a>，转载请注明出处。</p>
</ul>
<hr>
<h2 id="section-4">R语言绘制词云图案例--中文版</h2>
<p><kbd>Dataset</kbd><a href="./download/dataset.zip">(sample)sam_tianchi_2014001_rec_tmall_product.csv</a>下载，数据来源天池实验室。</p>
<figure class="highlight"><pre><code class="language-r" data-lang="r">#代码
#原始数据导入
data<-read.csv("H:/数据挖掘/数据挖掘作业/2016春硕/dataset/REC-TMALL/(sample)sam_tianchi_2014001_rec_tmall_product.csv",head=T)
library(stringr)
#去除空格
title<-str_split(data$title,' ')
library(jiebaR)
cutter=worker(stop_word ="H:/数据挖掘/数据挖掘作业/2016春硕/dataset/REC-TMALL/中文停词库.txt")
#分词处理
myfile.words <- lapply(title,function(x){
  cutter <= x
})
#合并同概念的词
myfile.words <-lapply(myfile.words,function(x){
 x=gsub('秋款|秋冬装装|秋冬装装装|秋季|早秋','秋装',x,perl=T)
 x=gsub('紧身','修身',x,perl=T)
 x=gsub('冬季','冬装',x,perl=T)
 x=gsub('秋冬季|秋冬','秋冬装',x,perl=T)
 x=gsub('青少年','青年',x,perl=T)
 x=gsub('韩潮|潮|男潮','韩版',x,perl=T)
 x=gsub('jacket|夹克衫','夹克',x,perl=T)
 x=gsub('mm|MM|女生|女士|女式|女款','女装',x,perl=T)
 x=gsub('裤子|牛仔裤|长裤','裤子',x,perl=T)
 x=gsub('打底','底裤',x,perl=T)
 x=gsub('男士|中学生|男生|男式','男装',x,perl=T)
 x=gsub('t恤|体恤|T恤|T恤衫','短袖',x,perl=T)
 x=gsub('衬衣|长袖','衬衫',x,perl=T)
 return(x)
})
#过滤掉1个字的词
myfile.words <-lapply(myfile.words,function(x){
  index <- nchar(x)>1
  x[index]
})
myfile.words <- unlist(myfile.words)
#统计词频
myfile.freq <- table((myfile.words))
myfile.freq <- rev(sort(myfile.freq))
myfile.freq <- data.frame(word=names(myfile.freq),freq=myfile.freq);
names(myfile.freq)<-c("word","words","freq")
word<-myfile.freq$word
freq<-myfile.freq$freq
myfile.freq <- data.frame(word,freq) 
write.table(myfile.freq,file="c:/data/分词结果.csv",quote=FALSE,sep=",")
fix(myfile.freq) 
#绘制词云图
#安装wordcloud2最新包
#library(devtools)
#devtools::install_github("lchiffon/wordcloud2")
library(wordcloud2)
wordcloud2(myfile.freq, size = 1, fontFamily = "微软雅黑",color = "random-light", backgroundColor = "black")
</code></pre></figure>
<hr>
<h3 id="section-4-1">词云图-1</h3>
<figure class="highlight"><pre><code class="language-r" data-lang="r">#代码
library(wordcloud2)
wordcloud2(myfile.freq, size = 1, fontFamily = "微软雅黑",
           color = "random-light", backgroundColor = "black")
</code></pre></figure>
<img src="./img/wordcloud.jpg" />
<hr>	
<h3 id="section-4-2">词云图-2</h3>
<figure class="highlight"><pre><code class="language-r" data-lang="r">#代码
wordcloud2(myfile.freq, size = 1,shape = 'star',fontFamily = "微软雅黑",
           color = "random-light", backgroundColor = "black")
</code></pre></figure>
<img src="./img/wordcloud1.jpg" />
<hr>
<h3 id="section-4-3">词云图-3</h3>
<figure class="highlight"><pre><code class="language-r" data-lang="r">#代码
wordcloud2(myfile.freq, size = 2, minRotation = -pi/2, maxRotation = -pi/2,
           fontFamily = "微软雅黑",color = "random-light", backgroundColor = "black")
</code></pre></figure>
<img src="./img/wordcloud2.jpg" />	
<hr>
<h2 id="section-5">R语言绘制词云图案例--字母版</h2>
<h3 id="section-5-1">词云图-1</h3>
<p>字母分词可以使词云图按照设定的字母进行呈现，具体命令如下：</p>
<figure class="highlight"><pre><code class="language-r" data-lang="r">#代码
library(wordcloud2)
letterCloud(myfile.words,word = "R", size = 2,fontFamily = "微软雅黑",color = "random-light", backgroundColor = "black")
</code></pre></figure>
<img src="./img/wordcloud3.jpg" />
<hr>
<h3 id="section-5-2">词云图-2</h3>
<p><kbd>dataset</kbd><a href="./download/dataset1.zip">dataset</a>下载，数据来源郎大为<a href="http://chiffon.ninja">博客</a></p>
<figure class="highlight"><pre><code class="language-r" data-lang="r">#代码
library(wordcloud2)
letterCloud(dataset,word = "WORDCLOUD", size = 2,
            fontFamily = "微软雅黑",color = "random-light", backgroundColor = "black")
</code></pre></figure>
<img src="./img/wordcloud4.jpg" />
<hr><ul class="tag_box list-unstyled list-inline"</ul></hr>
				<p class="text-right">
				<a href="./index1.html">MENBIN</a>
				<span class="time">
				<time><span class="label label-primary label-md"><strong>2016-06-17</strong></span></time>
				</br>地点：中国--大连--东财
				</span>
				</p>	
					<hr>					
					<ul class="tag_box list-unstyled list-inline">
					</ul>
					<hr>
                <!-- 多说 Share start -->
				<div class="ds-share"
                    style="text-align: right"
                    data-thread-key="./blog/wordcloud2"
                    data-title="wordcloud2绘制词云图"
                    data-url="http://binmen.github.io/blog/wordcloud2"
                    data-content=" Wordcloud2让你的词云图更加绚烂" >
                    <div class="ds-share-inline">
                      <ul  class="ds-share-icons-16">
                        <li data-toggle="ds-share-icons-more"><a class="ds-more" href="#">分享到：</a></li>
                        <li><a class="ds-wechat flat" href="javascript:void(0);" data-service="wechat">微信</a></li>
                        <li><a class="ds-weibo flat" href="javascript:void(0);" data-service="weibo">微博</a></li>
                        <li><a class="ds-douban flat" href="javascript:void(0);" data-service="douban">豆瓣</a></li>
                      </ul>
                      <div class="ds-share-icons-more">
                      </div>
                    </div>
                <hr>
                </div>
                <!-- 多说 Share end-->
                <ul class="pager">
                <!--如果可以向前翻页，<li class="previous  disabled"><a href=" " data-toggle="tooltip" data-placement="top" title="">-->
					<li class="previous"><a href="./javaR.html" data-toggle="tooltip" data-placement="top" title=" Java与R的互相调用">Previous</br> Java与R的互相调用</a></li>
		            <li class="next"><a href="./luding.html" data-toggle="tooltip" data-placement="top" title="文本挖掘技术初探">Next</br>文本挖掘技术初探</a></li>
                </ul>


                
                <!-- 多说评论框 start -->
                <div class="comment">
                    <div class="ds-thread"
                        data-thread-key="./blog/biaobai"
                        data-title="Wordcloud2绘制词云图"
                        data-url="http://binmen.github.io/blog/wordcloud2/" >
                    </div>
					
                </div>
                <!-- 多说评论框 end -->
            </div>
    </div>
		<!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">
           
                <!-- Friends Blog -->
                
                <hr>
                <h5>友情链接</h5>
                <ul class="list-inline">
                    
                       <li><a href="http://benmin.github.io/blog">数据泥瓦匠</a></li>
                    
                        <li><a href="https://github.com/Huxpro/huxpro.github.io">Hux-模板来源</a></li>
                    
                        <li><a href="http://brucezhaor.github.io/">brucezhaor</a></li>
						
						<li><a href="http://binmen.github.io/Simple">团队作品</a></li>
                    
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>


<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">

    var _user = 'menbin';
    // duoshuo comment query.
    var duoshuoQuery = {short_name: _user };
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- 多说公共JS代码 end -->
<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("http://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options.placement = 'left';
        anchors.add('h2,h3');
		anchors.remove('.subheading');
    })
</script>


<!-- mathjax -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<!-- for R highlight -->
<script type="text/javascript" src="./js/r-highlight.js"></script>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                 <!--站长统计-->
                 <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1259231356'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1259231356%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>	 
                <p class="copyright text-muted">
                   &copy;2016. MenBin Copyright Reserved. | Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> and <a href="http://www.bootcss.com/">Bootstrap</a>.Theme by <a href="http://huangxuan.me">Hux</a> and <a href="http://brucezhaor.github.io/">brucezhaor</a>.
					<br>
					<span class="label label-primary label-md"><strong>转载请标明作者和出处</strong></span>
                </p>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript" src="./js/jquery.min.js"></script>
<script type="text/javascript" src="./js/bootstrap.min.js"></script>
<script type="text/javascript" src="./js/blog.js"></script>
	
<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
	
	<!--fastClick.js -->
<script>
    async("http://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);  
    })
</script>

<!-- back-to-top -->
<div id="back-top">
  <a href="#section" data-toggle="tooltip" data-placement="top" title="top">
	<i class="fa fa-chevron-up"></i>
  </a>
</div>
<script type="text/javascript" src="./js/jquery-1.8.3.js"></script>
<script>
	$('#back-top').hide();
	$(document).ready(function () {
	$(window).scroll(function () {
    if ($(this).scrollTop() > 250) {
      $('#back-top').fadeIn();
    } else {
      $('#back-top').fadeOut();
    }
  });
  $('#back-top a').click(function () {
    $('body,html').animate({
      scrollTop: 0
    }, 800);
    return false;
  });
});
</script>
<script src="https://cdn1.lncld.net/static/js/av-mini-0.6.10.js"></script>
<script src="http://jerry-cdn.b0.upaiyun.com/hit-kounter/hit-kounter-lc-0.2.0.js"></script>	
</body>
</html>
